(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     94753,       2595]
NotebookOptionsPosition[     82944,       2399]
NotebookOutlinePosition[     83468,       2418]
CellTagsIndexPosition[     83425,       2415]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell["\[Copyright] Niklas Vest", "Text",ExpressionUUID->"3b71748f-259c-494d-869f-10b881eb1ada"],

Cell[CellGroupData[{

Cell["Perspective projection", "Section",
 CellChangeTimes->{{3.8355339722408857`*^9, 
  3.835533976120496*^9}},ExpressionUUID->"934a4bf7-953f-49a8-a686-\
3cd09f9fffa5"],

Cell["\<\
The projection matrix mapping from 3D to 2D space (embedded in homogeneous \
coordinates).\
\>", "Text",ExpressionUUID->"0732f9a9-27cd-461b-aaa6-9bc73673f775"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox["\[CapitalPi]", "0"], "=", 
   RowBox[{"(", GridBox[{
      {"1", "0", "0", "0"},
      {"0", "1", "0", "0"},
      {"0", "0", "1", "0"}
     }], ")"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.835260890563878*^9, 3.8352609328147917`*^9}, {
  3.835264301220818*^9, 3.8352643053118553`*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"cbc4b568-a7ec-4538-8e2a-7bce3254b013"],

Cell["Constructs the intrinsic camera parameter matrix K.", "Text",ExpressionUUID->"2a193f31-a30a-4d1c-9093-45fc7ca3eb7b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"K", "[", 
   RowBox[{
   "fx_", ",", "fy_", ",", "sx_", ",", "sy_", ",", "ox_", ",", "oy_", ",", 
    "\[Theta]_"}], "]"}], ":=", 
  RowBox[{"(", GridBox[{
     {
      RowBox[{"(", 
       RowBox[{"sx", "*", "fx"}], ")"}], "\[Theta]", "ox"},
     {"0", 
      RowBox[{"sy", "*", "fy"}], "oy"},
     {"0", "0", "1"}
    }], ")"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.835260947242001*^9, 3.835261004312273*^9}, {
   3.83526412498085*^9, 3.835264198515861*^9}, 3.835264311054945*^9, {
   3.836056510108049*^9, 3.8360565262237377`*^9}},
 CellLabel->"In[2]:=",ExpressionUUID->"6661c6d1-2bef-400d-98e5-258f8d87670e"],

Cell["\<\
An intrinsic camera parameter matrix for a pinhole cam without skew.\
\>", "Text",ExpressionUUID->"442977e0-ffae-4666-82cf-77e896b6c883"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"pinholeK", "[", 
   RowBox[{
    RowBox[{"fx_", ":", "fx"}], ",", 
    RowBox[{"fy_", ":", "fy"}], ",", 
    RowBox[{"ox_", ":", "ox"}], ",", 
    RowBox[{"oy_", ":", "oy"}]}], "]"}], ":=", 
  RowBox[{"K", "[", 
   RowBox[{
   "fx", ",", "fy", ",", "1", ",", "1", ",", "ox", ",", "oy", ",", "0"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"pinholeK", "[", "]"}], "]"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{
  3.835262296718789*^9, {3.8352639197169333`*^9, 3.835263919880004*^9}, {
   3.835264234103345*^9, 3.835264264348743*^9}, 3.835264316915572*^9, {
   3.836056573853982*^9, 3.836056600994323*^9}, {3.8360566604035187`*^9, 
   3.8360566861757603`*^9}},
 CellLabel->"In[3]:=",ExpressionUUID->"deb2f459-710e-4233-a1a0-4aa27126dc76"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"fx", "0", "ox"},
     {"0", "fy", "oy"},
     {"0", "0", "1"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.835260849337387*^9, 3.835262298391822*^9, {3.8352639106677437`*^9, 
   3.835263920258437*^9}, {3.835264231424521*^9, 3.835264240575811*^9}, 
   3.835264616012434*^9, 3.835265242768077*^9, 3.835703133196905*^9, 
   3.8360563124307737`*^9, 3.83605660193674*^9, {3.836056652743402*^9, 
   3.836056686668848*^9}, 3.836101568104718*^9, 3.83612369590864*^9, 
   3.836189790621146*^9, 3.836212573161871*^9, 3.836221912834147*^9, 
   3.8362253618766823`*^9},
 CellLabel->
  "Out[4]//MatrixForm=",ExpressionUUID->"45fcd910-18aa-4ff4-b158-\
c405e4dcb5b9"]
}, Open  ]],

Cell["\<\
A transformation from the world coordinate frame to the camera coordinate \
frame.\
\>", "Text",ExpressionUUID->"81f314f0-aaea-4a39-bb02-3185172ddbf1"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"g", "[", 
    RowBox[{"r_", ",", "t_"}], "]"}], ":=", 
   RowBox[{"Join", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Join", "[", 
      RowBox[{
       RowBox[{"Transpose", "[", "r", "]"}], ",", 
       RowBox[{"Transpose", "[", 
        RowBox[{"{", 
         RowBox[{"-", "t"}], "}"}], "]"}], ",", "2"}], "]"}], ",", " ", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"0", ",", "0", ",", "0", ",", "1"}], "}"}], "}"}]}], 
    "\[IndentingNewLine]", "]"}]}], "\n", 
  RowBox[{"(*", " ", "example", " ", "*)"}]}], "\n", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"g", "[", 
   RowBox[{
    RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1", ",", "1"}], "}"}]}], "]"}], "]"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.83526393322189*^9, 3.8352639378387747`*^9}, {
  3.8361923007043457`*^9, 3.836192302836596*^9}},
 CellLabel->"In[5]:=",ExpressionUUID->"ef18e869-375a-4e28-8055-f71dd065e52b"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", 
      RowBox[{"-", "1"}]},
     {"0", "1", "0", 
      RowBox[{"-", "1"}]},
     {"0", "0", "1", 
      RowBox[{"-", "1"}]},
     {"0", "0", "0", "1"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.8352608493524427`*^9, 3.835263910694076*^9, 
  3.83526461604237*^9, 3.835265242787484*^9, 3.835703133218156*^9, 
  3.836056312455855*^9, 3.836101568126799*^9, 3.836123695936124*^9, 
  3.8361897906384068`*^9, 3.836192305208705*^9, 3.836212573219914*^9, 
  3.836221912865922*^9, 3.8362253618936*^9},
 CellLabel->
  "Out[6]//MatrixForm=",ExpressionUUID->"3b1d3c3d-8d82-457e-a8a3-\
7fb9b401473e"]
}, Open  ]],

Cell[TextData[{
 "Embeds",
 " ",
 "the",
 " ",
 "vector",
 " ",
 StyleBox["v",
  FontWeight->Bold],
 StyleBox[" ",
  FontWeight->Bold],
 StyleBox["in",
  FontWeight->Plain],
 StyleBox[" ",
  FontWeight->Plain],
 StyleBox["homogeneous",
  FontWeight->Plain],
 StyleBox[" ",
  FontWeight->Plain],
 StyleBox["coordinates",
  FontWeight->Plain]
}], "Text",ExpressionUUID->"67fe2e07-5efe-4a68-b4a5-5d83bc8bf044"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"homog", "[", 
   RowBox[{"v_", "/;", 
    RowBox[{"VectorQ", "[", "v", "]"}]}], "]"}], ":=", 
  RowBox[{"Join", "[", 
   RowBox[{"v", ",", 
    RowBox[{"{", "1", "}"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"nonHomog", "[", 
    RowBox[{"v_", "/;", 
     RowBox[{"VectorQ", "[", "v", "]"}]}], "]"}], ":=", 
   RowBox[{
    FractionBox["v", 
     RowBox[{"v", "[", 
      RowBox[{"[", 
       RowBox[{"-", "1"}], "]"}], "]"}]], "[", 
    RowBox[{"[", 
     RowBox[{";;", 
      RowBox[{"-", "2"}]}], "]"}], "]"}]}], "\n", 
  RowBox[{"(*", " ", "example", " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"homog", "[", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "3"}], "}"}], "]"}], "]"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.835263966574374*^9, 3.835263967081047*^9}, {
   3.836191064089944*^9, 3.8361911140293713`*^9}, 3.8361911861605453`*^9},
 CellLabel->"In[7]:=",ExpressionUUID->"d2588755-10c9-4976-930f-c10feb4c63d1"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", 
   TagBox[GridBox[{
      {"1"},
      {"2"},
      {"3"},
      {"1"}
     },
     GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
     GridBoxSpacings->{"Columns" -> {
         Offset[0.27999999999999997`], {
          Offset[0.5599999999999999]}, 
         Offset[0.27999999999999997`]}, "Rows" -> {
         Offset[0.2], {
          Offset[0.4]}, 
         Offset[0.2]}}],
    Column], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.835260849371656*^9, 3.835263910725842*^9, 
  3.835263967794819*^9, 3.83526461606774*^9, 3.835265242809662*^9, 
  3.835703133235443*^9, 3.8360563124747*^9, 3.8361015681512747`*^9, 
  3.836123695955091*^9, 3.836189790655787*^9, 3.8361911168472557`*^9, 
  3.836191226635561*^9, 3.836212573239067*^9, 3.836221912886221*^9, 
  3.8362253619123077`*^9},
 CellLabel->
  "Out[9]//MatrixForm=",ExpressionUUID->"1573852c-ab76-4263-be98-\
2f5387107108"]
}, Open  ]],

Cell["\<\
A function that constructs a camera which is rotated and translated in the \
world. Applying it to a point in 3D world coordinates will yield the 2D image \
coordinates.\
\>", "Text",
 CellChangeTimes->{{3.8352639770193167`*^9, 
  3.835263977443284*^9}},ExpressionUUID->"d332da71-689f-43cf-8779-\
516aae9576ba"],

Cell[BoxData[
 RowBox[{
  RowBox[{"camera", "[", 
   RowBox[{"c_", ",", 
    RowBox[{"rot_", ":", 
     RowBox[{"IdentityMatrix", "[", "3", "]"}]}]}], "]"}], ":=", 
  RowBox[{
   RowBox[{
    SubscriptBox["\[CapitalPi]", "0"], " ", ".", " ", 
    RowBox[{"g", "[", 
     RowBox[{"rot", ",", "c"}], "]"}], " ", ".", " ", 
    RowBox[{"homog", "[", "#", "]"}]}], "&"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.8352642803393517`*^9, 3.835264287617991*^9}},
 CellLabel->"In[10]:=",ExpressionUUID->"f8babd40-bf7c-471c-909f-80fb8f66882e"],

Cell["\<\
Solves the linear system of equations that is the mapping from 3D world \
coordinates to 2D pixel coordinates to find intrinsic camera parameters \
(assuming no rotation of the cam).\
\>", "Text",ExpressionUUID->"6ef833b4-3eb8-4d37-a3e1-0f976611de8e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"intrinsicParamsFromProjections", "[", 
   RowBox[{"p1_", ",", "x1_", ",", "p2_", ",", "x2_", ",", "cam_"}], "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"z", ",", "p1p", ",", "p2p", ",", "\[Lambda]"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"project", ":=", 
      RowBox[{"camera", "[", "cam", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p1p", ",", " ", "p2p"}], "}"}], "=", " ", 
      RowBox[{"project", "/@", 
       RowBox[{"{", 
        RowBox[{"p1", ",", " ", "p2"}], "}"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        SubscriptBox["\[Lambda]", "1"], ",", 
        SubscriptBox["\[Lambda]", "2"]}], "}"}], "=", 
      RowBox[{
       RowBox[{
        RowBox[{"#", "[", 
         RowBox[{"[", 
          RowBox[{"-", "1"}], "]"}], "]"}], "&"}], "/@", 
       RowBox[{"{", 
        RowBox[{"p1p", ",", "p2p"}], "}"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Solve", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          SubscriptBox["\[Lambda]", "1"], 
          RowBox[{"homog", "[", "x1", "]"}]}], "==", 
         RowBox[{
          RowBox[{"pinholeK", "[", "]"}], " ", ".", " ", "p1p"}]}], " ", "&&",
         "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          SubscriptBox["\[Lambda]", "2"], 
          RowBox[{"homog", "[", "x2", "]"}]}], "==", 
         RowBox[{
          RowBox[{"pinholeK", "[", "]"}], " ", ".", " ", "p2p"}]}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"fx", ",", "fy", ",", "ox", ",", "oy"}], "}"}]}], 
      "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.835264393668487*^9, 3.8352646060501966`*^9}, {
  3.835264666666403*^9, 3.835264807155113*^9}, {3.835264908830989*^9, 
  3.8352650431486998`*^9}, {3.83610162737049*^9, 3.836101629605335*^9}},
 CellLabel->"In[11]:=",ExpressionUUID->"45caa8f8-97ac-465d-b6c9-66e3aee2aac9"],

Cell["An example for finding the intrinsic camera parameters:", "Text",ExpressionUUID->"3500c6a5-342e-4ea1-b3e7-3d260eda778f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"intrinsicParamsFromProjections", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "4", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"150", ",", "350"}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"{", 
    RowBox[{"3", ",", "4", ",", "5"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"225", ",", "325"}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"{", 
    RowBox[{"2", ",", "3", ",", "1"}], "}"}]}], "\n", "]"}]], "Input",
 CellChangeTimes->{{3.835264621035301*^9, 3.8352646243602943`*^9}, 
   3.836101621820462*^9},
 CellLabel->"In[34]:=",ExpressionUUID->"36d0086c-1f51-4e41-b4b7-929a6c02b32a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"fx", "\[Rule]", "100"}], ",", 
    RowBox[{"fy", "\[Rule]", "100"}], ",", 
    RowBox[{"ox", "\[Rule]", "200"}], ",", 
    RowBox[{"oy", "\[Rule]", "300"}]}], "}"}], "}"}]], "Output",
 CellChangeTimes->{
  3.83526084942302*^9, 3.835263910789207*^9, {3.835264616295867*^9, 
   3.83526462484021*^9}, 3.835264678301814*^9, {3.835264762903715*^9, 
   3.8352647972966413`*^9}, 3.835264852339653*^9, 3.835264902076789*^9, {
   3.835264954580374*^9, 3.8352650090481863`*^9}, 3.8352650524915533`*^9, 
   3.835265242840694*^9, 3.8357031332782087`*^9, 3.836056312530484*^9, 
   3.836101568215293*^9, {3.836101609482402*^9, 3.8361016321079082`*^9}},
 CellLabel->"Out[34]=",ExpressionUUID->"dc41c371-be01-4711-8e61-b051505cdf29"]
}, Open  ]],

Cell["\<\
An example (from bonus quiz 2) where the intrinsic parameters are known and \
you want to find the 2D pixel coordinates:\
\>", "Text",
 CellChangeTimes->{{3.835704237682354*^9, 
  3.835704241826627*^9}},ExpressionUUID->"1409e04a-cf59-473d-bbf9-\
f355db77b8d3"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"intr1", "=", 
   RowBox[{"(", GridBox[{
      {"700", "0", "350"},
      {"0", "350", "135"},
      {"0", "0", "1"}
     }], ")"}]}], ";"}], "\n", 
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"intr1", " ", ".", " ", 
    RowBox[{
     RowBox[{"camera", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"-", "1"}], ",", 
        RowBox[{"-", "1"}], ",", "0"}], "}"}], "]"}], "[", 
     RowBox[{"{", 
      RowBox[{"4", ",", 
       RowBox[{"-", "1"}], ",", "7"}], "}"}], "]"}]}], "//", 
   "nonHomog"}]}]}], "Input",
 CellChangeTimes->{{3.835264857643634*^9, 3.835264879682041*^9}, {
  3.836192708841853*^9, 3.8361927154398203`*^9}},
 CellLabel->
  "In[118]:=",ExpressionUUID->"f3b6962f-15f4-48e6-b689-cda84a6e46dc"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"850", ",", "135"}], "}"}]], "Output",
 CellChangeTimes->{
  3.835260849439705*^9, 3.835263910817543*^9, 3.835264616316441*^9, {
   3.835264854808401*^9, 3.8352648893826447`*^9}, 3.8352652428608007`*^9, 
   3.8357031332989883`*^9, 3.8360563125513687`*^9, 3.8361015682621*^9, 
   3.83619271579832*^9},
 CellLabel->
  "Out[119]=",ExpressionUUID->"3f14742c-40bc-44f8-a7a5-93b5fbab9b6c"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Radial distortion", "Section",
 CellChangeTimes->{{3.835703506737526*^9, 
  3.83570351124795*^9}},ExpressionUUID->"4c23f449-55b0-43d5-881f-\
4f27f706ae98"],

Cell["But did the un-distortion work tho?", "Text",
 CellChangeTimes->{{3.8357035133186207`*^9, 3.8357035248057203`*^9}, 
   3.835703682959813*^9},ExpressionUUID->"e1d73b19-45fe-4f46-b88c-\
282c1fbbdd3d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"undistortionSuccessful", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"p1_", ",", "x1_"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"p2_", ",", "x2_"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"p3_", ",", "x3_"}], "}"}]}], "]"}], ":=", 
  RowBox[{"Module", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"p1p2", "=", 
       RowBox[{"Normalize", "[", 
        RowBox[{"p2", " ", "-", " ", "p1"}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"p2p3", "=", 
       RowBox[{"Normalize", "[", 
        RowBox[{"p3", "-", "p2"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"x1x2", "=", 
       RowBox[{"Normalize", "[", 
        RowBox[{"x2", "-", "x1"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"x2x3", "=", 
       RowBox[{"Normalize", "[", 
        RowBox[{"x3", "-", "x2"}], "]"}]}]}], "\[IndentingNewLine]", "}"}], 
    ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
     "StringTemplate", "[", "\"\<Undistortion successful? \[Rule] ``\>\"", 
      "]"}], "[", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        SuperscriptBox["p1p2", "2"], "\[Equal]", 
        SuperscriptBox["p2p3", "2"]}], ",", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          SuperscriptBox["x1x2", "2"], "\[Equal]", 
          SuperscriptBox["x2x3", "2"]}], ",", "\[IndentingNewLine]", 
         "\"\<Yes, the 3D points and the 2D projections both lie on a \
straight line\>\"", ",", 
         "\"\<No, the 3D points lie on a line but the 2D coordinates don't. \
The projection is destorted.\>\""}], "\[IndentingNewLine]", "]"}], ",", 
       "\[IndentingNewLine]", 
       "\"\<Can't say, the points are not on a straight line.\>\""}], "]"}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",\

 InitializationCell->True,
 CellChangeTimes->{{3.8357035303069353`*^9, 3.835703633360867*^9}, {
  3.835703687265636*^9, 3.835703790411132*^9}, {3.83570383923488*^9, 
  3.8357038423365192`*^9}, {3.835703891978244*^9, 3.8357041386720943`*^9}, {
  3.835704227911359*^9, 3.835704355509766*^9}, {3.835709608102448*^9, 
  3.8357096094032516`*^9}, {3.8357096448504753`*^9, 3.835709704005887*^9}, {
  3.836101670176819*^9, 3.836101772700077*^9}},
 CellLabel->"In[12]:=",ExpressionUUID->"bbbedb91-4432-413e-834e-fe8864631e67"],

Cell["An example from bonus quiz 2:", "Text",
 CellChangeTimes->{{3.835704286698195*^9, 
  3.8357042904784737`*^9}},ExpressionUUID->"64fb6d82-6c22-4eeb-a794-\
65357d4f5363"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"undistortionSuccessful", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "5"}], ",", 
       RowBox[{"-", "4"}], ",", "50"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"200", ",", "250"}], "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "1", ",", "50"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"300", ",", "280"}], "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"5", ",", "6", ",", "50"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"400", ",", "340"}], "}"}]}], "}"}]}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellLabel->"In[36]:=",ExpressionUUID->"5661e537-2a44-4522-a936-fea330f75b89"],

Cell[BoxData["\<\"Undistortion successful? \[Rule] No, the 3D points lie on a \
line but the 2D coordinates don't. They are still destorted\"\>"], "Output",
 CellChangeTimes->{{3.835704292201819*^9, 3.835704358297827*^9}, 
   3.836056312790161*^9, 3.8361015685104103`*^9, 3.836101737199357*^9},
 CellLabel->"Out[36]=",ExpressionUUID->"317d33af-ccd0-4d58-af5a-d5ae0cfd5efd"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"inverseDistortion", "[", "g_", "]"}], ":=", 
  RowBox[{
   RowBox[{"Values", "[", 
    RowBox[{
     RowBox[{"Solve", "[", 
      RowBox[{
       RowBox[{"rd", "\[Equal]", 
        RowBox[{
         RowBox[{"g", "[", "r", "]"}], "r"}]}], ",", "r"}], "]"}], "[", 
     RowBox[{"[", 
      RowBox[{"1", ",", "1"}], "]"}], "]"}], "]"}], "/", "rd"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.836061206199915*^9, 3.8360612239267893`*^9}, {
  3.836061300387529*^9, 3.8360613255001507`*^9}, {3.8360613725734663`*^9, 
  3.836061381016239*^9}, {3.8360637329975767`*^9, 3.836063735792039*^9}},
 CellLabel->"In[13]:=",ExpressionUUID->"4f8bfd52-7bc9-4745-bef2-7694eda3b556"],

Cell["An example from exercise sheet 4:", "Text",
 CellChangeTimes->{{3.8360612118248377`*^9, 
  3.836061216770776*^9}},ExpressionUUID->"2ba9bea2-1376-45ae-8e7d-\
fb9bbcd92251"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", "g", "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"g", "[", "r_", "]"}], ":=", 
     RowBox[{
      FractionBox["1", 
       RowBox[{"\[Omega]", " ", "r"}]], 
      RowBox[{"ArcTan", "[", 
       RowBox[{"2", "r", " ", 
        RowBox[{"Tan", "[", 
         FractionBox["\[Omega]", "2"], "]"}]}], "]"}]}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"inverseDistortion", "[", "g", "]"}]}]}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellChangeTimes->{{3.836061227406929*^9, 3.8360612363746777`*^9}, 
   3.836061331877939*^9, 3.836063743062492*^9},
 CellLabel->"In[18]:=",ExpressionUUID->"faaebb06-139b-4ba9-b1ac-d972c4738086"],

Cell[BoxData[
 TemplateBox[{
   FractionBox[
    RowBox[{
      RowBox[{"Cot", "[", 
        FractionBox["\[Omega]", "2"], "]"}], " ", 
      RowBox[{"Tan", "[", 
        RowBox[{"rd", " ", "\[Omega]"}], "]"}]}], 
    RowBox[{"2", " ", "rd"}]], 
   InterpretationBox[
    DynamicModuleBox[{Typeset`open = False}, 
     TemplateBox[{"Expression", 
       StyleBox[
        TagBox[
         TooltipBox["\"condition\"", 
          TagBox[
           RowBox[{
             RowBox[{"(", 
               RowBox[{
                 RowBox[{
                   RowBox[{"Re", "[", 
                    RowBox[{"rd", " ", "\[Omega]"}], "]"}], "\[Equal]", 
                   RowBox[{"-", 
                    FractionBox["\[Pi]", "2"]}]}], "&&", 
                 RowBox[{
                   RowBox[{"Im", "[", 
                    RowBox[{"rd", " ", "\[Omega]"}], "]"}], "<", "0"}]}], 
               ")"}], "||", 
             RowBox[{
               RowBox[{"-", 
                 FractionBox["\[Pi]", "2"]}], "<", 
               RowBox[{"Re", "[", 
                 RowBox[{"rd", " ", "\[Omega]"}], "]"}], "<", 
               FractionBox["\[Pi]", "2"]}], "||", 
             RowBox[{"(", 
               RowBox[{
                 RowBox[{
                   RowBox[{"Re", "[", 
                    RowBox[{"rd", " ", "\[Omega]"}], "]"}], "\[Equal]", 
                   FractionBox["\[Pi]", "2"]}], "&&", 
                 RowBox[{
                   RowBox[{"Im", "[", 
                    RowBox[{"rd", " ", "\[Omega]"}], "]"}], ">", "0"}]}], 
               ")"}]}], Short[#, 7]& ]], Annotation[#, 
          Short[
           Or[
            And[
            Re[$CellContext`rd $CellContext`\[Omega]] == Rational[-1, 2] Pi, 
             Im[$CellContext`rd $CellContext`\[Omega]] < 0], 
            Rational[-1, 2] Pi < Re[$CellContext`rd $CellContext`\[Omega]] < 
            Rational[1, 2] Pi, 
            And[
            Re[$CellContext`rd $CellContext`\[Omega]] == Rational[1, 2] Pi, 
             Im[$CellContext`rd $CellContext`\[Omega]] > 0]], 7], 
          "Tooltip"]& ], "IconizedCustomName", StripOnInput -> False], 
       GridBox[{{
          RowBox[{
            TagBox["\"Head: \"", "IconizedLabel"], "\[InvisibleSpace]", 
            TagBox["Or", "IconizedItem"]}]}, {
          RowBox[{
            TagBox["\"Byte count: \"", "IconizedLabel"], "\[InvisibleSpace]", 
            
            TagBox["1464", "IconizedItem"]}]}}, 
        GridBoxAlignment -> {"Columns" -> {{Left}}}, DefaultBaseStyle -> 
        "Column", 
        GridBoxItemSize -> {
         "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}], 
       Dynamic[Typeset`open]}, "IconizedObject"]], 
    Or[
     And[Re[$CellContext`rd $CellContext`\[Omega]] == Rational[-1, 2] Pi, 
      Im[$CellContext`rd $CellContext`\[Omega]] < 0], Rational[-1, 2] Pi < 
     Re[$CellContext`rd $CellContext`\[Omega]] < Rational[1, 2] Pi, 
     And[Re[$CellContext`rd $CellContext`\[Omega]] == Rational[1, 2] Pi, 
      Im[$CellContext`rd $CellContext`\[Omega]] > 0]], SelectWithContents -> 
    True, Selectable -> False]},
  "ConditionalExpression"]], "Output",
 CellChangeTimes->{
  3.836061239531886*^9, {3.836061305489008*^9, 3.8360613324654083`*^9}, 
   3.836061377612791*^9, 3.836063762269617*^9, 3.836101568658421*^9},
 CellLabel->"Out[18]=",ExpressionUUID->"9dc7dbb3-fa33-4d93-9fbe-a7c366b6f046"]
}, Open  ]],

Cell[TextData[{
 "Note that this solution uses ",
 Cell[BoxData[
  FormBox[
   RowBox[{"Cot", "[", 
    FractionBox["\[Omega]", "2"], "]"}], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "872ff68d-d653-47ed-92f8-38aebd41680f"],
 " whereas we found ",
 Cell[BoxData[
  FormBox[
   FractionBox["1", 
    RowBox[{"Tan", "[", 
     FractionBox["\[Omega]", "2"], "]"}]], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "4e2d1631-0cce-4eb8-8fa2-faa42ba79802"],
 " in the exercise. These terms are equivalent."
}], "Text",
 CellChangeTimes->{{3.836063829806595*^9, 
  3.836063876969784*^9}},ExpressionUUID->"b9058ff4-6db3-4a31-b063-\
427918d89fb6"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Cot", "[", "x", "]"}], "\[Equal]", 
  FractionBox["1", 
   RowBox[{"Tan", "[", "x", "]"}]]}]], "Input",
 CellChangeTimes->{{3.836063890241873*^9, 3.836063895165071*^9}},
 CellLabel->"In[19]:=",ExpressionUUID->"fb1ec65f-49c9-451f-883c-69a292b3b8a6"],

Cell[BoxData["True"], "Output",
 CellChangeTimes->{3.836063896464621*^9, 3.836101568764686*^9},
 CellLabel->"Out[19]=",ExpressionUUID->"400107ea-884a-4dfe-a193-cfc111850be7"]
}, Open  ]],

Cell["\<\
However, the example from bonus quiz 2 doesn\[CloseCurlyQuote]t work for some \
reason. If you know why, please let me know.\
\>", "Text",
 CellChangeTimes->{{3.8360612660028753`*^9, 3.8360612749492073`*^9}, {
  3.836063766677751*^9, 
  3.8360637984868927`*^9}},ExpressionUUID->"56b14ec8-74de-499c-8d6d-\
13e5e8066b79"],

Cell[BoxData[
 RowBox[{"(*", "\[IndentingNewLine]", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "g", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"g", "[", "r_", "]"}], ":=", 
      RowBox[{
       FractionBox["1", "s"], 
       RowBox[{"Log", "[", 
        RowBox[{"1", "+", 
         FractionBox["r", "k"]}], "]"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"inverseDistortion", "[", "g", "]"}]}]}], "\[IndentingNewLine]", 
   "]"}], "\[IndentingNewLine]", "*)"}]], "Input",
 CellChangeTimes->{{3.836061277784649*^9, 3.8360612939807577`*^9}, {
  3.836061387615247*^9, 3.8360614285174837`*^9}, {3.83606375966082*^9, 
  3.836063806666997*^9}},
 CellLabel->"In[20]:=",ExpressionUUID->"295a3730-dcdc-45cd-aa64-4b8a22b06dcd"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Eight-Point algorithm", "Section",
 CellChangeTimes->{{3.8355339859476433`*^9, 
  3.835533991655212*^9}},ExpressionUUID->"c0df08f4-6cf8-4984-8633-\
784251351be4"],

Cell[TextData[{
 StyleBox["DISCLAIMER",
  FontWeight->"Bold"],
 ": This implementation is not tested and probably incorrect lel. Feel free \
to test and improve it."
}], "Text",
 CellChangeTimes->{{3.836061949327807*^9, 
  3.8360619769574547`*^9}},ExpressionUUID->"fe5c7c47-5939-41d2-a024-\
366577781a39"],

Cell[BoxData[
 RowBox[{
  RowBox[{"eightPointReconstruction", "[", "ps_", "]"}], ":=", 
  RowBox[{"Module", "[", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Keep", " ", "those", " ", "local"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "as", ",", "\[Chi]", ",", "e", ",", "es", ",", "ep", ",", "eU", ",", 
      "eS", ",", "eV", ",", "r1", ",", "r2", ",", "t1", ",", "t2", ",", "rz", 
      ",", "eSNorm"}], "}"}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Compute", " ", "all", " ", "kroneckers", " ", "of", " ", "pointpairs"}],
      " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"as", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"KroneckerProduct", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"#", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"#", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "}"}]}], "]"}], "&"}], "/@", 
       "ps"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Accumulate", " ", "in", " ", "magic", " ", "matrix", " ", "\[Chi]", 
       " ", "with", " ", 
       SuperscriptBox["a", "j"], " ", "as", " ", "columns"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"\[Chi]", "=", 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{"Join", "@@", "as"}], ")"}], "\[Transpose]"]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
       SuperscriptBox["E", "S"], " ", "is", " ", "the", " ", "last", " ", 
       RowBox[{"(", 
        SuperscriptBox["9", "th"], ")"}], " ", "column", " ", "in", " ", "V", 
       " ", "of", " ", "the", " ", "SVD", " ", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"U", ",", "S", ",", "V"}], "}"}], ".", " ", 
        RowBox[{"[", 
         RowBox[{"[", 
          RowBox[{"All", ",", 
           RowBox[{"-", "1"}]}], "]"}], "]"}]}], " ", "is", " ", "the", " ", 
       "same", " ", "as", " ", 
       RowBox[{"(", 
        RowBox[{":", 
         RowBox[{",", 
          RowBox[{"-", "1"}]}]}], ")"}], " ", "in", " ", "Matlab"}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"es", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"SingularValueDecomposition", "[", "\[Chi]", "]"}], "[", 
        RowBox[{"[", "3", "]"}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"All", ",", 
         RowBox[{"-", "1"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"Unstack", " ", 
       SuperscriptBox["E", "S"], " ", "to", " ", "get", " ", "E"}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"e", "=", 
      SuperscriptBox[
       RowBox[{"ArrayReshape", "[", 
        RowBox[{"es", ",", 
         RowBox[{"{", 
          RowBox[{"3", ",", "3"}], "}"}]}], "]"}], "\[Transpose]"]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Project", " ", "to", " ", "normalized", " ", "essential", " ", 
       "space"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"eU", ",", "eS", ",", "eV"}], "}"}], "=", 
      RowBox[{"SingularValueDecomposition", "[", "e", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"eSNorm", "=", 
      RowBox[{"DiagonalMatrix", "[", 
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "0"}], "}"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"Extract", " ", "rotation", " ", "and", " ", "translation"}], 
      " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"rz", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"RotationMatrix", "[", 
         RowBox[{"#", ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}], "&"}], "/@", 
       RowBox[{"{", 
        RowBox[{
         FractionBox["Pi", "2"], ",", 
         RowBox[{"-", 
          FractionBox["Pi", "2"]}]}], "}"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"r1", ",", "r2"}], "}"}], "=", 
      RowBox[{
       RowBox[{
        RowBox[{"eU", ".", 
         SuperscriptBox["#", "\[Transpose]"], ".", 
         SuperscriptBox["eV", "\[Transpose]"]}], "&"}], "/@", "rz"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"t1", ",", "t2"}], "}"}], "=", 
      RowBox[{
       RowBox[{
        RowBox[{"eU", ".", "#", ".", "eSNorm", ".", 
         SuperscriptBox["eU", "\[Transpose]"]}], "&"}], "/@", "rz"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"r1", ",", "r2", ",", "t1", ",", "t2"}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->CompressedData["
1:eJwdzDtIgnEABPAPRRNJqJAImopItIgkEsqKnlOYEkmWmA9sErLQBqGGDBqS
JNMQLMgCI4osPrOgh6BbhEsOBdoaEoYEqWGJef/h+HEcXJPBPDnPoCiqsRLI
lYuUIXdmyOk6mYW2uj0T5CjjS3Dg+W+FdI1iFUZYDDv0cLwbsC8XdkC7L0OU
pD7dMKRr98CknBkg/bdwDL/TIxdwTJWloWmr4w5aL5n3cNOyH4MBP00s6qsT
kA768/DxwFuClO6MqFrPsq4q7jyUqmAv3cODg8VyLQywtSKYWbC0Qe4MuxNu
R8vjUCqUq+DXGl8NObzCHGx9Fxqg4uXQRH7UuUXoC8atUPLkXIbTE2IHTCqk
51AvcIXhabfmGqZjzbdQFvmIwrx2OAVHE8Y3WJ8PssIVeVM3NbDFbOPDo59d
AWyQ9YvJ7njtgv+2uvDK
  "],
 CellLabel->"In[14]:=",ExpressionUUID->"b4bbc0a0-4262-4716-9446-f5c9e9398e58"],

Cell["A highly artificial example:", "Text",
 CellChangeTimes->{{3.8360627367490263`*^9, 
  3.836062743493991*^9}},ExpressionUUID->"6174f1b4-93a8-4cdb-ab33-\
4ef8473f2b39"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"pointPairs", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"#", "*", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"1", ",", "1"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"2", ",", "2"}], "}"}]}], "}"}]}], "&"}], "/@", 
    RowBox[{"Range", "[", "8", "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Column", "[", 
  RowBox[{"Map", "[", 
   RowBox[{"MatrixForm", ",", "pointPairs", ",", 
    RowBox[{"{", "2", "}"}]}], "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.835534225112686*^9, 3.835534341305439*^9}, {
  3.8355344351021557`*^9, 3.835534435599908*^9}, {3.835534752188508*^9, 
  3.835534760787957*^9}, {3.835534799436562*^9, 3.835534804404101*^9}, {
  3.8355348379449472`*^9, 3.835534940129828*^9}, {3.835535305749097*^9, 
  3.835535306591813*^9}, {3.8355355864636793`*^9, 3.835535690164228*^9}, {
  3.835537234436206*^9, 3.835537331392529*^9}},
 CellLabel->"In[22]:=",ExpressionUUID->"b1fc2616-1675-4da5-a851-aa19de790714"],

Cell[BoxData[
 TagBox[GridBox[{
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"1"},
            {"1"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"2"},
            {"2"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"2"},
            {"2"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"4"},
            {"4"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"3"},
            {"3"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"6"},
            {"6"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"4"},
            {"4"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"8"},
            {"8"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"5"},
            {"5"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"10"},
            {"10"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"6"},
            {"6"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"12"},
            {"12"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"7"},
            {"7"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"14"},
            {"14"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]},
    {
     RowBox[{"{", 
      RowBox[{
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"8"},
            {"8"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]], ",", 
       TagBox[
        RowBox[{"(", "\[NoBreak]", 
         TagBox[GridBox[{
            {"16"},
            {"16"}
           },
           GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.5599999999999999]}, 
               Offset[0.27999999999999997`]}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}}],
          Column], "\[NoBreak]", ")"}],
        Function[BoxForm`e$, 
         MatrixForm[BoxForm`e$]]]}], "}"}]}
   },
   DefaultBaseStyle->"Column",
   GridBoxAlignment->{"Columns" -> {{Left}}},
   GridBoxItemSize->{"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}],
  "Column"]], "Output",
 CellChangeTimes->{3.83553733162145*^9, 3.835703133341096*^9, 
  3.836056312852713*^9, 3.836101568824695*^9},
 CellLabel->"Out[23]=",ExpressionUUID->"4a5a1ef4-e5e5-4126-8ad6-549bcd411286"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"r1", ",", "r2", ",", "t1", ",", "t2"}], "}"}], "=", 
   RowBox[{
    RowBox[{"eightPointReconstruction", "[", "pointPairs", "]"}], "//", 
    "N"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"r1", "//", "MatrixForm"}], "\[IndentingNewLine]", 
 RowBox[{"r2", "//", "MatrixForm"}], "\[IndentingNewLine]", 
 RowBox[{"t1", "//", "MatrixForm"}], "\[IndentingNewLine]", 
 RowBox[{"t2", "//", "MatrixForm"}]}], "Input",
 CellChangeTimes->{{3.835535693545258*^9, 3.835535694190381*^9}, {
   3.835535864172928*^9, 3.835535870426585*^9}, {3.835536253468584*^9, 
   3.835536253860237*^9}, {3.835536467047865*^9, 3.835536496980609*^9}, {
   3.8355378071330214`*^9, 3.835537889591539*^9}, 3.835703180665008*^9},
 CellLabel->"In[24]:=",ExpressionUUID->"3b40b186-414d-401f-92ca-1ba9438f45e9"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"-", "0.9378528376157987`"}], "0.311165300130377`", 
      RowBox[{"-", "0.1536496370668225`"}]},
     {
      RowBox[{"-", "0.031990831553134494`"}], 
      RowBox[{"-", "0.5183859259910211`"}], 
      RowBox[{"-", "0.8545481954992189`"}]},
     {
      RowBox[{"-", "0.3455555551174551`"}], 
      RowBox[{"-", "0.7965250703707973`"}], "0.4961241483724243`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.835537889846098*^9, 3.835703133515575*^9, 
  3.835703181749761*^9, 3.836056312939764*^9, 3.8361015689179897`*^9},
 CellLabel->
  "Out[25]//MatrixForm=",ExpressionUUID->"aa6e152d-faf8-476e-aa42-\
083390d5f3cf"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.9341100748063559`", "0.2901925187471093`", 
      RowBox[{"-", "0.2079102455591666`"}]},
     {"0.032031048883466605`", "0.5119241202926805`", "0.8584332862663183`"},
     {"0.35554518707569227`", 
      RowBox[{"-", "0.8085307644893753`"}], "0.4688983075481686`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.835537889846098*^9, 3.835703133515575*^9, 
  3.835703181749761*^9, 3.836056312939764*^9, 3.8361015689211187`*^9},
 CellLabel->
  "Out[26]//MatrixForm=",ExpressionUUID->"c7ced30c-7fed-4d7a-8c9a-\
a2916f3eb486"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.`", "0.9364256999618766`", 
      RowBox[{"-", "0.0037699628839475774`"}]},
     {
      RowBox[{"-", "0.9364256999618766`"}], "0.`", 
      RowBox[{"-", "0.3508456866355399`"}]},
     {"0.0037699628839475774`", "0.3508456866355399`", "0.`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.835537889846098*^9, 3.835703133515575*^9, 
  3.835703181749761*^9, 3.836056312939764*^9, 3.836101568923298*^9},
 CellLabel->
  "Out[27]//MatrixForm=",ExpressionUUID->"29dfbd3c-7971-45bb-8a1e-\
821ef71d871c"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.`", 
      RowBox[{"-", "0.9364256999618766`"}], "0.0037699628839475774`"},
     {"0.9364256999618766`", "0.`", "0.3508456866355399`"},
     {
      RowBox[{"-", "0.0037699628839475774`"}], 
      RowBox[{"-", "0.3508456866355399`"}], "0.`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.835537889846098*^9, 3.835703133515575*^9, 
  3.835703181749761*^9, 3.836056312939764*^9, 3.836101568925609*^9},
 CellLabel->
  "Out[28]//MatrixForm=",ExpressionUUID->"5ba7502b-16f6-49d0-80c1-\
77550e31c99d"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Non-linear Optimization", "Section",
 CellChangeTimes->{{3.8362256519416027`*^9, 
  3.8362256554172497`*^9}},ExpressionUUID->"726876ef-5d78-4045-84fe-\
3ee4fbc05f03"],

Cell[BoxData[
 RowBox[{"<<", "Optimization`UnconstrainedProblems`"}]], "Input",
 CellLabel->"In[47]:=",ExpressionUUID->"b29ffad5-3c3f-4835-884b-2b3333cb1cac"],

Cell["\<\
This bad boy takes an energy and a residual function and attempts to run 2 \
steps of optimization, printing step values while at it.\
\>", "Text",
 CellChangeTimes->{{3.836221591986828*^9, 3.836221657278319*^9}, {
   3.836221792354232*^9, 3.836221835443358*^9}, {3.836221911915737*^9, 
   3.8362219137549543`*^9}, {3.836221984494841*^9, 3.8362220086691227`*^9}, {
   3.836222071563497*^9, 3.836222072337337*^9}, {3.836222258482953*^9, 
   3.83622228676338*^9}, 3.836222803185039*^9, {3.8362236757923727`*^9, 
   3.8362236984767637`*^9}, {3.836223889463203*^9, 3.83622389710674*^9}, {
   3.836224039053254*^9, 3.8362240663189297`*^9}, {3.8362241970099087`*^9, 
   3.836224197421508*^9}, {3.836224493541647*^9, 3.836224498856063*^9}, {
   3.836225671917698*^9, 3.8362256761088543`*^9}, {3.8362257158975897`*^9, 
   3.836225768162191*^9}},ExpressionUUID->"d6e7e7cf-f19a-4175-8ad2-\
59d9a2d932fa"],

Cell[BoxData[
 RowBox[{
  RowBox[{"run", "[", 
   RowBox[{"e_", ",", "r_", ",", 
    RowBox[{"method_", ":", "\"\<GaussNewton\>\""}]}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"FindMinimum", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"e", "[", 
      RowBox[{"r", ",", "x"}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"x", ",", "2"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"MaxIterations", "\[Rule]", "2"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Method", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"method", ",", 
        RowBox[{"\"\<Residual\>\"", "\[Rule]", 
         RowBox[{"r", "[", "x", "]"}]}]}], "}"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"StepMonitor", "\[RuleDelayed]", 
      RowBox[{"Print", "[", 
       RowBox[{"\"\<x = \>\"", ",", " ", "x"}], "]"}]}]}], 
    "\[IndentingNewLine]", "]"}], "//", "Quiet"}]}]], "Input",
 CellChangeTimes->{{3.8362216849746647`*^9, 3.836221688404169*^9}, {
   3.836221754180278*^9, 3.836221806691826*^9}, {3.83622186095088*^9, 
   3.836221861016457*^9}, {3.83622194761372*^9, 3.8362219500455437`*^9}, {
   3.8362220242060413`*^9, 3.836222036855545*^9}, {3.836222095308951*^9, 
   3.8362221104128227`*^9}, {3.83622215769636*^9, 3.836222167074869*^9}, {
   3.8362222009039392`*^9, 3.8362222264951487`*^9}, 3.836222269222279*^9, {
   3.8362223013886433`*^9, 3.836222366345345*^9}, {3.836222404208536*^9, 
   3.836222405160276*^9}, {3.836222528395561*^9, 3.836222644078232*^9}, {
   3.83622267864921*^9, 3.836222681723138*^9}, {3.836222712954895*^9, 
   3.836222790529839*^9}, {3.836222824584147*^9, 3.836222839199004*^9}, {
   3.836222875212975*^9, 3.8362228983981457`*^9}, {3.83622309978395*^9, 
   3.836223157506915*^9}, {3.836223233110696*^9, 3.836223377019713*^9}, {
   3.83622409825746*^9, 3.83622415239354*^9}, {3.836224203372364*^9, 
   3.8362242143738127`*^9}, {3.836224673937007*^9, 3.8362247301074457`*^9}, {
   3.836224773391328*^9, 3.83622489546682*^9}, {3.8362249295178843`*^9, 
   3.836225022642921*^9}, {3.83622513717938*^9, 3.836225168063509*^9}, {
   3.836225221352416*^9, 3.836225231119225*^9}, {3.8362253979419823`*^9, 
   3.836225454421339*^9}, {3.836225531294303*^9, 3.83622556322569*^9}, {
   3.836225739807379*^9, 3.836225740312065*^9}, {3.836225771706257*^9, 
   3.836225775781674*^9}, {3.8362258474903793`*^9, 3.836225854128002*^9}},
 CellLabel->"In[56]:=",ExpressionUUID->"dad7584f-7a72-4ce2-88d5-044e3ab597f7"],

Cell["An energy to minimize:", "Text",
 CellChangeTimes->{{3.836225702925157*^9, 
  3.836225707474822*^9}},ExpressionUUID->"0cc09668-445a-4cd3-a903-\
d68a1fb3ee4d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"e", "[", 
   RowBox[{"r_", ",", "x_"}], "]"}], ":=", 
  SuperscriptBox[
   RowBox[{"r", "[", "x", "]"}], "2"]}]], "Input",
 CellLabel->"In[48]:=",ExpressionUUID->"8adc98fb-fdeb-4898-a9dc-84211d42f65c"],

Cell["Define some residual functions", "Text",
 CellChangeTimes->{{3.836225684871798*^9, 
  3.8362256937230186`*^9}},ExpressionUUID->"d65ce504-c470-46a9-a39d-\
c9db81197e58"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"r1", "[", "x_", "]"}], ":=", 
  RowBox[{
   RowBox[{"RealSign", "[", "x", "]"}], 
   SuperscriptBox[
    RowBox[{"RealAbs", "[", "x", "]"}], 
    FractionBox["1", "3"]]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"r2", "[", "x_", "]"}], ":=", 
  SuperscriptBox["x", "2"]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"r3", "[", "x_", "]"}], ":=", 
  RowBox[{"Max", "[", 
   RowBox[{"x", ",", 
    RowBox[{
     RowBox[{"2", "x"}], "-", "1"}]}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.8362256994712954`*^9, 3.8362257129069567`*^9}, {
  3.8362257810385017`*^9, 3.836225782969569*^9}},
 CellLabel->"In[50]:=",ExpressionUUID->"28b8e976-d54f-4a73-9d8b-948c4ff71023"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"run", "[", 
   RowBox[{"e", ",", "r1"}], "]"}], ";"}]], "Input",
 CellChangeTimes->{
  3.83622339036483*^9, 3.836224107453431*^9, {3.836225786414159*^9, 
   3.836225786490691*^9}},
 CellLabel->"In[57]:=",ExpressionUUID->"cbf78f86-6d9a-44fa-9396-c738b0434e24"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"x = \"\>", "\[InvisibleSpace]", 
   RowBox[{"-", "0.3189292573858582`"}]}],
  SequenceForm["x = ", -0.3189292573858582],
  Editable->False]], "Print",
 CellChangeTimes->{3.8362258579038963`*^9},
 CellLabel->
  "During evaluation of \
In[57]:=",ExpressionUUID->"a74541b0-5aa0-4a4f-a261-1f429409d2db"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"x = \"\>", "\[InvisibleSpace]", "0.20817516011971293`"}],
  SequenceForm["x = ", 0.20817516011971293`],
  Editable->False]], "Print",
 CellChangeTimes->{3.836225857905327*^9},
 CellLabel->
  "During evaluation of \
In[57]:=",ExpressionUUID->"d9f2bb90-fc51-4ccd-9429-dcfdfc35714c"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"run", "[", 
   RowBox[{"e", ",", "r2"}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.836223367859923*^9, 3.836223392950398*^9}, {
  3.836225789674424*^9, 3.836225789752033*^9}},
 CellLabel->"In[58]:=",ExpressionUUID->"bb02bc02-8924-46ea-8267-a3c7ce575677"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"x = \"\>", "\[InvisibleSpace]", "1.`"}],
  SequenceForm["x = ", 1.],
  Editable->False]], "Print",
 CellChangeTimes->{3.836223393174621*^9, 3.836225860212954*^9},
 CellLabel->
  "During evaluation of \
In[58]:=",ExpressionUUID->"086ddaef-5b63-429e-99fe-9c5942f90e5c"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"x = \"\>", "\[InvisibleSpace]", "0.5`"}],
  SequenceForm["x = ", 0.5],
  Editable->False]], "Print",
 CellChangeTimes->{3.836223393174621*^9, 3.836225860214238*^9},
 CellLabel->
  "During evaluation of \
In[58]:=",ExpressionUUID->"ac9bd12b-7888-4777-975f-7d49bc0ea494"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"run", "[", 
   RowBox[{"e", ",", "r3"}], "]"}], ";"}]], "Input",
 CellChangeTimes->{
  3.836223396089815*^9, {3.83622579319806*^9, 3.836225793246361*^9}},
 CellLabel->"In[59]:=",ExpressionUUID->"640ac9f1-1e6b-4494-a70f-c2772d083ade"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"x = \"\>", "\[InvisibleSpace]", "0.5`"}],
  SequenceForm["x = ", 0.5],
  Editable->False]], "Print",
 CellChangeTimes->{3.83622339630219*^9, 3.83622586261417*^9},
 CellLabel->
  "During evaluation of \
In[59]:=",ExpressionUUID->"9a6adfc5-0504-4c7f-be2f-9531df40dc5a"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"x = \"\>", "\[InvisibleSpace]", "0.`"}],
  SequenceForm["x = ", 0.],
  Editable->False]], "Print",
 CellChangeTimes->{3.83622339630219*^9, 3.836225862616418*^9},
 CellLabel->
  "During evaluation of \
In[59]:=",ExpressionUUID->"93f395df-6a1a-4185-a632-d11255519589"]
}, Open  ]]
}, Open  ]],

Cell["\<\
For some residuals (like here, r1) you have to run Gauss-Newton manually. \
Here are two steps:\
\>", "Text",
 CellChangeTimes->{{3.836225875064374*^9, 
  3.8362258968793907`*^9}},ExpressionUUID->"4f9c0988-0258-43cb-854b-\
d983cd14cfe7"],

Cell[BoxData[
 RowBox[{
  RowBox[{"gaussNewton", "[", 
   RowBox[{"r_", ",", "xt_"}], "]"}], ":=", 
  RowBox[{
   RowBox[{"xt", "-", 
    RowBox[{
     RowBox[{"r", "[", "xt", "]"}], 
     SuperscriptBox[
      RowBox[{
       RowBox[{"r", "'"}], "[", "xt", "]"}], 
      RowBox[{"-", "1"}]]}]}], "//", "N"}]}]], "Input",
 CellChangeTimes->{{3.836225902775168*^9, 3.8362259408774757`*^9}},
 CellLabel->"In[61]:=",ExpressionUUID->"c443c70f-5a75-4ef4-bbeb-d8d3a31bc05f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"x1", ",", "x2"}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"x1", "=", 
     RowBox[{"gaussNewton", "[", 
      RowBox[{"r1", ",", "2"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"x2", "=", 
     RowBox[{"gaussNewton", "[", 
      RowBox[{"r1", ",", "x1"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"Print", "[", 
     RowBox[{
     "\"\<\!\(\*SubscriptBox[\(x\), \(1\)]\) = \>\"", ",", " ", "x1", ",", 
      "\"\<, \!\(\*SubscriptBox[\(x\), \(2\)]\) = \>\"", ",", "x2"}], "]"}], 
    ";"}]}], "\[IndentingNewLine]", "]"}]], "Input",
 CellChangeTimes->{{3.8362259514296007`*^9, 3.8362260183681498`*^9}},
 CellLabel->"In[62]:=",ExpressionUUID->"b4145e4b-09a5-41d3-8f1c-680e41e64f46"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"\\!\\(\\*SubscriptBox[\\(x\\), \\(1\\)]\\) = \"\>", 
   "\[InvisibleSpace]", 
   RowBox[{"-", "4.`"}], 
   "\[InvisibleSpace]", "\<\", \\!\\(\\*SubscriptBox[\\(x\\), \\(2\\)]\\) = \
\"\>", "\[InvisibleSpace]", "8.000000000000002`"}],
  SequenceForm[
  "\!\(\*SubscriptBox[\(x\), \(1\)]\) = ", -4., 
   ", \!\(\*SubscriptBox[\(x\), \(2\)]\) = ", 8.000000000000002],
  Editable->False]], "Print",
 CellChangeTimes->{3.836226020818577*^9},
 CellLabel->
  "During evaluation of \
In[62]:=",ExpressionUUID->"12b351f1-cf9f-4167-841d-d8d527125e9d"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Worksheet / Other useful stuff", "Section",
 CellChangeTimes->{{3.836056418580017*^9, 3.836056422631671*^9}, {
  3.836189678890068*^9, 
  3.836189681626545*^9}},ExpressionUUID->"9b155fba-f2b2-4c04-8836-\
04efd989bc8e"],

Cell["\<\
Aka some stuff that I randomly wrote up and may come in helpful.\
\>", "Text",
 CellChangeTimes->{{3.836061882544224*^9, 
  3.836061896149032*^9}},ExpressionUUID->"3e8f44d5-3ddb-4d4c-bcb4-\
af6b8a9e7590"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ForAll", "[", 
   RowBox[{"u", ",", 
    RowBox[{"u", "\[Element]", 
     RowBox[{"Matrices", "[", 
      RowBox[{"{", 
       RowBox[{"3", ",", "1"}], "}"}], "]"}]}], ",", 
    RowBox[{
     RowBox[{"Det", "[", 
      RowBox[{"u", ".", 
       SuperscriptBox["u", "\[Transpose]"]}], "]"}], "\[Equal]", "0"}]}], 
   "]"}], "//", "Reduce"}]], "Input",
 CellChangeTimes->{{3.836103991048093*^9, 3.836104175666224*^9}, {
  3.836104219560416*^9, 3.836104220257555*^9}, {3.836104278826002*^9, 
  3.836104331243434*^9}, {3.8361044103138103`*^9, 3.836104525945367*^9}},
 CellLabel->"In[82]:=",ExpressionUUID->"10642b5e-3d07-4fba-a458-07bb8f76c0c0"],

Cell[BoxData["True"], "Output",
 CellChangeTimes->{{3.836104018845125*^9, 3.836104023337166*^9}, 
   3.83610406590044*^9, {3.836104098000496*^9, 3.836104127790292*^9}, {
   3.836104168914195*^9, 3.836104175905181*^9}, 3.8361042207193403`*^9, {
   3.83610428215597*^9, 3.8361043316229267`*^9}, {3.836104411711296*^9, 
   3.836104464211245*^9}, {3.836104495041411*^9, 3.836104526224597*^9}},
 CellLabel->"Out[82]=",ExpressionUUID->"45197914-ea62-4c23-b558-0e4a64a8311e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"(", GridBox[{
      {"640", "0", "320"},
      {"0", "480", "240"},
      {"0", "0", "1"}
     }], ")"}], ".", 
   SubscriptBox["\[CapitalPi]", "0"], ".", 
   RowBox[{"Inverse", "[", GridBox[{
      {"0", "0", "1", "4"},
      {
       RowBox[{"-", "1"}], "0", "0", "2"},
      {"0", 
       RowBox[{"-", "1"}], "0", "3"},
      {"0", "0", "0", "1"}
     }], "]"}], ".", 
   RowBox[{"{", 
    RowBox[{"8", ",", 
     RowBox[{"-", "1"}], ",", "1", ",", "1"}], "}"}]}], "/", "4", 
  RowBox[{"(*", " ", 
   RowBox[{"homog", " ", "coord", " ", "is", " ", "4"}], " ", 
   "*)"}]}]], "Input",
 CellChangeTimes->{{3.836141090725357*^9, 3.836141164059288*^9}, {
  3.8361898068100977`*^9, 
  3.836189815976857*^9}},ExpressionUUID->"e7d0f50f-5f35-418b-b186-\
5f394d51bf1a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"800", ",", "480", ",", "1"}], "}"}]], "Output",
 CellChangeTimes->{{3.836141161103784*^9, 3.83614116437945*^9}},
 CellLabel->
  "Out[146]=",ExpressionUUID->"49d9fb7a-a204-41e0-8dc6-b6de006ad8fc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"pinholeK", "[", 
    RowBox[{"540", ",", "540", ",", "320", ",", "240"}], "]"}], ".", 
   RowBox[{"(", GridBox[{
      {"60"},
      {"100"},
      {"180"}
     }], ")"}]}], "/", "180"}]], "Input",
 CellLabel->
  "In[101]:=",ExpressionUUID->"c1a55ae8-e9b4-494f-b1b3-78298afb6279"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", "500", "}"}], ",", 
   RowBox[{"{", "540", "}"}], ",", 
   RowBox[{"{", "1", "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.836189800418796*^9},
 CellLabel->
  "Out[101]=",ExpressionUUID->"9ad14da1-c8b3-4483-be6a-a349b9bab7e0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"pinholeK", "[", 
    RowBox[{"500", ",", "400", ",", "320", ",", "240"}], "]"}], ".", 
   RowBox[{
    RowBox[{"camera", "[", 
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", "1"}], ",", "0"}], "}"}], "]"}], "[", 
    RowBox[{"{", 
     RowBox[{"2", ",", "0", ",", "4"}], "}"}], "]"}]}], "//", 
  "nonHomog"}]], "Input",
 CellChangeTimes->{{3.836190953306526*^9, 3.8361910523320293`*^9}},
 CellLabel->
  "In[115]:=",ExpressionUUID->"3b8e62ba-673b-49e1-a656-66c933644baa"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"570", ",", "340"}], "}"}]], "Output",
 CellChangeTimes->{{3.836191003540049*^9, 3.836191030246236*^9}, 
   3.836191122658042*^9, {3.8361911755310802`*^9, 3.8361912339272614`*^9}},
 CellLabel->
  "Out[115]=",ExpressionUUID->"3ae7e9da-7199-4336-a359-591b8a61eb64"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"stack", "[", "mat_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"m", ",", "n"}], "}"}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"m", ",", "n"}], "}"}], "=", 
      RowBox[{"Dimensions", "[", "mat", "]"}]}], ";", 
     RowBox[{"ArrayReshape", "[", 
      RowBox[{
       SuperscriptBox["mat", "\[Transpose]"], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"m", " ", "n"}], ",", "1"}], "}"}]}], "]"}]}]}], 
   "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.836207357835804*^9, 3.836207445102099*^9}},
 CellLabel->"In[15]:=",ExpressionUUID->"f6db5602-91e4-400e-9607-ab54ab1369b2"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"X", "=", GridBox[{
     {"a", "b", "c"},
     {"d", "e", "f"},
     {"g", "h", "i"},
     {"j", "k", "l"}
    }]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   SuperscriptBox["X", "\[Transpose]"], ".", "X"}], "//", 
  "MatrixForm"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"X", ".", 
   SuperscriptBox["X", "\[Transpose]"]}], "//", "MatrixForm"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.8362052439933167`*^9, 3.836205315159297*^9}, {
  3.836206107359088*^9, 3.836206108850811*^9}},
 CellLabel->"In[16]:=",ExpressionUUID->"d4791470-bd92-4ddf-abf5-291269798230"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       SuperscriptBox["a", "2"], "+", 
       SuperscriptBox["d", "2"], "+", 
       SuperscriptBox["g", "2"], "+", 
       SuperscriptBox["j", "2"]}], 
      RowBox[{
       RowBox[{"a", " ", "b"}], "+", 
       RowBox[{"d", " ", "e"}], "+", 
       RowBox[{"g", " ", "h"}], "+", 
       RowBox[{"j", " ", "k"}]}], 
      RowBox[{
       RowBox[{"a", " ", "c"}], "+", 
       RowBox[{"d", " ", "f"}], "+", 
       RowBox[{"g", " ", "i"}], "+", 
       RowBox[{"j", " ", "l"}]}]},
     {
      RowBox[{
       RowBox[{"a", " ", "b"}], "+", 
       RowBox[{"d", " ", "e"}], "+", 
       RowBox[{"g", " ", "h"}], "+", 
       RowBox[{"j", " ", "k"}]}], 
      RowBox[{
       SuperscriptBox["b", "2"], "+", 
       SuperscriptBox["e", "2"], "+", 
       SuperscriptBox["h", "2"], "+", 
       SuperscriptBox["k", "2"]}], 
      RowBox[{
       RowBox[{"b", " ", "c"}], "+", 
       RowBox[{"e", " ", "f"}], "+", 
       RowBox[{"h", " ", "i"}], "+", 
       RowBox[{"k", " ", "l"}]}]},
     {
      RowBox[{
       RowBox[{"a", " ", "c"}], "+", 
       RowBox[{"d", " ", "f"}], "+", 
       RowBox[{"g", " ", "i"}], "+", 
       RowBox[{"j", " ", "l"}]}], 
      RowBox[{
       RowBox[{"b", " ", "c"}], "+", 
       RowBox[{"e", " ", "f"}], "+", 
       RowBox[{"h", " ", "i"}], "+", 
       RowBox[{"k", " ", "l"}]}], 
      RowBox[{
       SuperscriptBox["c", "2"], "+", 
       SuperscriptBox["f", "2"], "+", 
       SuperscriptBox["i", "2"], "+", 
       SuperscriptBox["l", "2"]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.836205282221635*^9, 3.836205315420897*^9}, 
   3.8362061098792458`*^9, {3.8362073234171333`*^9, 3.836207332142959*^9}, 
   3.836212573289095*^9, 3.836221912935976*^9, 3.836225361989757*^9},
 CellLabel->
  "Out[17]//MatrixForm=",ExpressionUUID->"d4dc419b-4e42-4bb5-9b98-\
5f28e1509452"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       SuperscriptBox["a", "2"], "+", 
       SuperscriptBox["b", "2"], "+", 
       SuperscriptBox["c", "2"]}], 
      RowBox[{
       RowBox[{"a", " ", "d"}], "+", 
       RowBox[{"b", " ", "e"}], "+", 
       RowBox[{"c", " ", "f"}]}], 
      RowBox[{
       RowBox[{"a", " ", "g"}], "+", 
       RowBox[{"b", " ", "h"}], "+", 
       RowBox[{"c", " ", "i"}]}], 
      RowBox[{
       RowBox[{"a", " ", "j"}], "+", 
       RowBox[{"b", " ", "k"}], "+", 
       RowBox[{"c", " ", "l"}]}]},
     {
      RowBox[{
       RowBox[{"a", " ", "d"}], "+", 
       RowBox[{"b", " ", "e"}], "+", 
       RowBox[{"c", " ", "f"}]}], 
      RowBox[{
       SuperscriptBox["d", "2"], "+", 
       SuperscriptBox["e", "2"], "+", 
       SuperscriptBox["f", "2"]}], 
      RowBox[{
       RowBox[{"d", " ", "g"}], "+", 
       RowBox[{"e", " ", "h"}], "+", 
       RowBox[{"f", " ", "i"}]}], 
      RowBox[{
       RowBox[{"d", " ", "j"}], "+", 
       RowBox[{"e", " ", "k"}], "+", 
       RowBox[{"f", " ", "l"}]}]},
     {
      RowBox[{
       RowBox[{"a", " ", "g"}], "+", 
       RowBox[{"b", " ", "h"}], "+", 
       RowBox[{"c", " ", "i"}]}], 
      RowBox[{
       RowBox[{"d", " ", "g"}], "+", 
       RowBox[{"e", " ", "h"}], "+", 
       RowBox[{"f", " ", "i"}]}], 
      RowBox[{
       SuperscriptBox["g", "2"], "+", 
       SuperscriptBox["h", "2"], "+", 
       SuperscriptBox["i", "2"]}], 
      RowBox[{
       RowBox[{"g", " ", "j"}], "+", 
       RowBox[{"h", " ", "k"}], "+", 
       RowBox[{"i", " ", "l"}]}]},
     {
      RowBox[{
       RowBox[{"a", " ", "j"}], "+", 
       RowBox[{"b", " ", "k"}], "+", 
       RowBox[{"c", " ", "l"}]}], 
      RowBox[{
       RowBox[{"d", " ", "j"}], "+", 
       RowBox[{"e", " ", "k"}], "+", 
       RowBox[{"f", " ", "l"}]}], 
      RowBox[{
       RowBox[{"g", " ", "j"}], "+", 
       RowBox[{"h", " ", "k"}], "+", 
       RowBox[{"i", " ", "l"}]}], 
      RowBox[{
       SuperscriptBox["j", "2"], "+", 
       SuperscriptBox["k", "2"], "+", 
       SuperscriptBox["l", "2"]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.836205282221635*^9, 3.836205315420897*^9}, 
   3.8362061098792458`*^9, {3.8362073234171333`*^9, 3.836207332142959*^9}, 
   3.836212573289095*^9, 3.836221912935976*^9, 3.8362253619936123`*^9},
 CellLabel->
  "Out[18]//MatrixForm=",ExpressionUUID->"fd0e375c-8893-4de1-bac9-\
202919efe525"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["MATLAB Cheat Sheet", "Section",
 CellChangeTimes->{{3.836137355593008*^9, 3.836137361086451*^9}, {
  3.8361908493468513`*^9, 
  3.836190852759009*^9}},ExpressionUUID->"b4361e9f-9914-48b3-8fe9-\
c36bec722d63"],

Cell[TextData[StyleBox["norm(A(:))*norm(A(:)) == \
trace(A\[CloseCurlyQuote]*A)", "Code"]], "Text",
 CellChangeTimes->{{3.8361373660642776`*^9, 3.836137384409844*^9}, {
  3.8361383798120537`*^9, 3.836138423153631*^9}, {3.836189625421898*^9, 
  3.836189625800214*^9}},ExpressionUUID->"834402b6-fde1-4372-a224-\
9e0bcb53f1e7"],

Cell[TextData[StyleBox["trace(B(:)*C(:)\[CloseCurlyQuote])==sum(sum(B.*C))", \
"Code"]], "Text",
 CellChangeTimes->{{3.8362124867206097`*^9, 
  3.836212500823097*^9}},ExpressionUUID->"f81ccece-2f91-4f41-883f-\
21429bbb12fa"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"M1", "=", GridBox[{
        {"a", "b", "c"},
        {"d", "e", "f"}
       }]}], ",", "\[IndentingNewLine]", 
     RowBox[{"M2", "=", GridBox[{
        {"u", "v", "w"},
        {"x", "y", "z"}
       }]}], ","}], "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
   
   RowBox[{
    RowBox[{"Tr", "[", 
     RowBox[{
      RowBox[{"stack", "[", "M1", "]"}], ".", 
      SuperscriptBox[
       RowBox[{"stack", "[", "M2", "]"}], "\[Transpose]"]}], "]"}], 
    "\[Equal]", 
    RowBox[{"Total", "[", 
     RowBox[{"Total", "[", 
      RowBox[{"M1", "*", "M2"}], "]"}], "]"}]}]}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellChangeTimes->{{3.836212514687098*^9, 3.836212631947756*^9}, {
  3.836212767722932*^9, 3.8362127969652843`*^9}},
 CellLabel->"In[41]:=",ExpressionUUID->"5f1f6541-7187-48b2-951b-d4740ed546b1"],

Cell[BoxData["True"], "Output",
 CellChangeTimes->{{3.8362125917900887`*^9, 3.836212632559396*^9}, {
  3.8362127941698008`*^9, 3.836212797325346*^9}},
 CellLabel->"Out[41]=",ExpressionUUID->"8545cce8-b522-416a-a429-dac54bb4f2c2"]
}, Open  ]],

Cell[TextData[{
 StyleBox["kron(A(:),A(:))\[CloseCurlyQuote]*P(:)", "Code"],
 " where ",
 StyleBox["P=kron(I(n),I(m)) == trace(A*A\[CloseCurlyQuote])", "Code"]
}], "Text",
 CellChangeTimes->{
  3.836189627506323*^9},ExpressionUUID->"5deccb45-3429-4f36-8305-\
6dd9e941a908"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"I", "=", "IdentityMatrix"}], ",", 
     RowBox[{"as", "=", 
      RowBox[{"stack", "[", "X", "]"}]}], ",", "m", ",", "n", ",", "ps"}], 
    "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"m", ",", "n"}], "}"}], "=", 
     RowBox[{"Dimensions", "[", "X", "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"ps", "=", 
     RowBox[{"stack", "[", 
      RowBox[{"KroneckerProduct", "[", 
       RowBox[{
        RowBox[{"I", "[", "n", "]"}], ",", 
        RowBox[{"I", "[", "m", "]"}]}], "]"}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{
       SuperscriptBox[
        RowBox[{"KroneckerProduct", "[", 
         RowBox[{"as", ",", "as"}], "]"}], "\[Transpose]"], ".", "ps"}], "==", 
      RowBox[{"Tr", "[", 
       RowBox[{"X", ".", 
        SuperscriptBox["X", "\[Transpose]"]}], "]"}]}], "//", "Reduce"}]}]}], 
  "\[IndentingNewLine]", "]"}]], "Input",
 CellChangeTimes->{{3.83620594568629*^9, 3.836206021131875*^9}, {
   3.836206056823265*^9, 3.836206084156798*^9}, {3.8362061277964087`*^9, 
   3.836206304876553*^9}, {3.836206335048882*^9, 3.8362064575170107`*^9}, {
   3.8362066221270123`*^9, 3.836206711922628*^9}, 3.83620676217491*^9, {
   3.836207039517202*^9, 3.836207043325809*^9}, {3.836207085722095*^9, 
   3.836207279233692*^9}, {3.8362074357215242`*^9, 3.836207531345901*^9}, {
   3.836212731815343*^9, 3.836212762183786*^9}, 
   3.8362128034135036`*^9},ExpressionUUID->"c5780316-75b6-4e37-8193-\
27739d822a9f"],

Cell[BoxData["True"], "Output",
 CellChangeTimes->{
  3.83620725981686*^9, 3.836207473024149*^9, 3.8362075395170803`*^9, {
   3.836212746175149*^9, 3.836212762540195*^9}},
 CellLabel->"Out[39]=",ExpressionUUID->"ad2c5457-d238-4635-abe7-c76eb0e7a79c"]
}, Open  ]],

Cell[TextData[{
 "calculating the pseudo inverse without ",
 StyleBox["pinv", "Code"],
 " and without A\\b: ",
 StyleBox["inv(A\[CloseCurlyQuote]*A)*A\[CloseCurlyQuote]*b", "Code"]
}], "Text",
 CellChangeTimes->{{3.8361896319163713`*^9, 3.836189667925857*^9}, {
  3.836190887185532*^9, 
  3.83619088844379*^9}},ExpressionUUID->"005014c7-caf8-48cc-8cdf-\
a529b28b51dc"],

Cell["\<\
If you have two versions of the same program and one is vectorized (no loop), \
that one will probably be faster :-)\
\>", "Text",
 CellChangeTimes->{{3.8361904902157*^9, 
  3.836190507990576*^9}},ExpressionUUID->"8ed8322f-c30a-4867-8263-\
043c6b9bc413"]
}, Open  ]],

Cell[CellGroupData[{

Cell["General Cheat Sheet", "Section",
 CellChangeTimes->{{3.83613995164944*^9, 3.8361399540938263`*^9}, {
  3.8361908450550137`*^9, 
  3.836190846734005*^9}},ExpressionUUID->"517bd2c3-5c06-413a-8adc-\
e54e505e1746"],

Cell[TextData[{
 "Dimension of symmetric matrix: ",
 Cell[BoxData[
  FormBox[
   FractionBox[
    RowBox[{"n", 
     RowBox[{"(", 
      RowBox[{"n", "+", "1"}], ")"}]}], "2"], TraditionalForm]],
  ExpressionUUID->"29ba1450-cda4-489f-9ee3-ddbdc5403e8d"]
}], "Text",
 CellChangeTimes->{{3.8361399554962797`*^9, 
  3.836139979029129*^9}},ExpressionUUID->"034abead-9b52-45e9-97bb-\
0e3a21b02b3d"],

Cell[TextData[{
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{"L", 
     RowBox[{"(", "x", ")"}]}], "=", "Ax"}], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "8ff33d7a-5dc5-4329-ab02-88940a12d4af"],
 " and ",
 Cell[BoxData[
  FormBox[
   RowBox[{"B", "=", 
    RowBox[{
     SuperscriptBox["P", 
      RowBox[{"-", "1"}]], "AP"}]}], TraditionalForm]],ExpressionUUID->
  "9d37a4bf-8387-430b-9b5a-fd4c58853759"],
 ", then B expresses L in the coordinates of the basis P"
}], "Text",
 CellChangeTimes->{{3.83614024970872*^9, 3.836140301237101*^9}, 
   3.836190839243352*^9},ExpressionUUID->"43751fde-0a48-40a8-a0f1-\
14b3e8be61ef"],

Cell[TextData[{
 "The cheeky rank question; For matrices A,B,C with the sizes ",
 Cell[BoxData[
  FormBox[
   RowBox[{"n", "\[Cross]", "k"}], TraditionalForm]],ExpressionUUID->
  "2a5b4edf-a1ef-4157-abd1-0229ba555577"],
 ", ",
 Cell[BoxData[
  FormBox[
   RowBox[{"m", "\[Cross]", "k"}], TraditionalForm]],ExpressionUUID->
  "149fcbf7-35e5-4016-8a64-1cf4232005a7"],
 ", and ",
 Cell[BoxData[
  FormBox[
   RowBox[{"m", "\[Cross]", "n"}], TraditionalForm]],ExpressionUUID->
  "1405ac87-e1f2-4b50-8552-dd0b373ba8aa"],
 ", the minimum rank is 0 (if A, B, or C is 0) and the max rank is ",
 Cell[BoxData[
  FormBox[
   RowBox[{"min", 
    RowBox[{"(", 
     RowBox[{"n", ",", "k", ",", "m"}], ")"}]}], TraditionalForm]],
  ExpressionUUID->"763c731b-c710-4673-9c16-db7d3612d32b"],
 " because the rank can never \[OpenCurlyDoubleQuote]grow\
\[CloseCurlyDoubleQuote] (you can\[CloseCurlyQuote]t invent dimensions). But \
the rank of any ",
 Cell[BoxData[
  FormBox[
   RowBox[{"a", "\[Cross]", "b"}], TraditionalForm]],ExpressionUUID->
  "f1ba4934-7e5e-4f6c-912c-005d3f0e80db"],
 " Matrix has a maximum rank of ",
 Cell[BoxData[
  FormBox[
   RowBox[{"min", 
    RowBox[{"(", 
     RowBox[{"a", ",", "b"}], ")"}]}], TraditionalForm]],ExpressionUUID->
  "1a490728-c807-432d-9401-747e670964ca"],
 "."
}], "Text",
 CellChangeTimes->{{3.836189417770656*^9, 3.83618953695325*^9}, {
  3.836190782853438*^9, 
  3.836190829442276*^9}},ExpressionUUID->"78cf042a-a4b0-45d3-b597-\
0f772ac36a0a"],

Cell[TextData[{
 "Why 8-point algorithm? We want a 1D null space of ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["\[Chi]E", "S"], TraditionalForm]],ExpressionUUID->
  "21304978-790a-4058-ba95-3100f9746990"],
 " that represents the freedom of scale w.r.t. reconstruction. Hence we need \
8 equations for 9 variables where each point contributes the equation ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{
        SubscriptBox["x", "1"], "\[TensorProduct]", 
        SubscriptBox["x", "2"]}], ")"}], "T"], 
     SuperscriptBox["E", "S"]}], "=", "0"}], TraditionalForm]],ExpressionUUID->
  "e40f938b-13c4-4cc9-8f5e-5a4160b2ec3f"]
}], "Text",
 CellChangeTimes->{{3.836193932354434*^9, 3.836194040506648*^9}, {
  3.836194101877923*^9, 
  3.836194129965035*^9}},ExpressionUUID->"2f6a3ffc-f244-4c0f-a551-\
9368fa304ceb"],

Cell[TextData[{
 "The fundamental matrix is basically the essential matrix but in addition \
you consider the intrinsic camera parameters. The epipolar constraint is ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     SuperscriptBox[
      SubscriptBox["x", "2"], "T"], "E", " ", 
     SubscriptBox["x", "1"]}], "=", "0"}], TraditionalForm]],ExpressionUUID->
  "7c9d450b-2598-415c-8dbd-e0901716fd99"],
 " but here, the image coordinates are normalized. The pixel coordinates \
would be  ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["Kx", "i"], TraditionalForm]],ExpressionUUID->
  "becb0b87-505f-4667-b8aa-5449b21bf5c6"],
 ". The fundamental matrix expresses the same constraint but operates on \
pixel coordinates, hence ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     RowBox[{
      SubscriptBox["x", "2"], "'"}], " ", 
     RowBox[{"K", "^", 
      RowBox[{"-", "T"}]}], " ", "E", " ", 
     RowBox[{"K", "^", 
      RowBox[{"-", "1"}]}], 
     RowBox[{
      SubscriptBox["x", "1"], "'"}]}], "=", "0"}], TraditionalForm]],
  ExpressionUUID->"a70eb068-7833-403e-88af-9cd2feba397f"],
 " ."
}], "Text",
 CellChangeTimes->{{3.836194043667849*^9, 3.8361940722355843`*^9}, {
  3.836204293669689*^9, 
  3.836204502610314*^9}},ExpressionUUID->"bf64b6fd-cf81-4ef8-a818-\
7b26bfeac2f6"],

Cell["\<\
F has infinite decompositions of R and T. F does not have two equal larger \
singular values.\
\>", "Text",
 CellChangeTimes->{{3.836204542792094*^9, 
  3.836204582220222*^9}},ExpressionUUID->"3c891eca-bfb4-4a7f-ac86-\
4ff495922d4a"],

Cell[TextData[{
 "For an SVD of ",
 Cell[BoxData[
  FormBox[
   RowBox[{"A", "=", 
    SuperscriptBox["USV", "T"]}], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "422c7cb8-8748-4954-9827-54ca0b5f426e"],
 ", the pseudo-inverse is ",
 Cell[BoxData[
  FormBox[
   RowBox[{"V", 
    RowBox[{
     SuperscriptBox["\[Sum]", "\[Dagger]"], 
     SuperscriptBox["U", "T"]}]}], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "36f6642a-b728-4e2c-88e1-dfab6f00a752"],
 ", and ",
 StyleBox["not",
  FontWeight->"Bold"],
 " ",
 Cell[BoxData[
  FormBox[
   RowBox[{"U", 
    RowBox[{
     SuperscriptBox["\[Sum]", "\[Dagger]"], 
     SuperscriptBox["V", "T"]}]}], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "fe385faf-c647-4e35-8c8a-c1fb3a8d7817"],
 "."
}], "Text",
 CellChangeTimes->{{3.836212983313459*^9, 
  3.836213062123281*^9}},ExpressionUUID->"f0f6bb27-990a-4633-a3d7-\
c4e5e427202a"],

Cell[TextData[{
 Cell[BoxData[
  FormBox[
   RowBox[{
    SuperscriptBox[
     OverscriptBox["w", "^"], "2"], "=", 
    RowBox[{
     SuperscriptBox["ww", "T"], "-", 
     SubscriptBox["I", 
      RowBox[{"3", "\[Cross]", "3"}]]}]}], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "f30ad8c6-a2ae-44b9-904d-80ff675cc010"],
 " and ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SuperscriptBox[
     OverscriptBox["w", "^"], "3"], "=", 
    RowBox[{"-", 
     OverscriptBox["w", "^"]}]}], TraditionalForm]],
  FormatType->TraditionalForm,ExpressionUUID->
  "e1140b65-c9bc-4b0c-9325-2de8309f4374"]
}], "Text",
 CellChangeTimes->{{3.836214167558989*^9, 
  3.836214228441716*^9}},ExpressionUUID->"2e35efd2-680d-4f76-8874-\
21cbee906a9e"],

Cell[TextData[{
 StyleBox["Bundle adjustment",
  FontWeight->"Bold"],
 " minimizes ",
 StyleBox["reprojection",
  FontWeight->"Bold"],
 " error,\n",
 StyleBox["Direct Image Alignment",
  FontWeight->"Bold"],
 " minimizes ",
 StyleBox["photometric",
  FontWeight->"Bold"],
 " error,\n",
 StyleBox["8-point algorithm",
  FontWeight->"Bold"],
 " minimizes nothing, its a big ",
 StyleBox["chungus",
  FontWeight->"Bold"]
}], "Text",
 CellChangeTimes->{{3.836221048046904*^9, 
  3.8362210838469353`*^9}},ExpressionUUID->"0968dcce-a4ff-43fc-8456-\
7e0a648d630b"]
}, Open  ]]
},
WindowSize->{751.304347826087, 813.1304347826087},
WindowMargins->{{Automatic, -751.3043478260865}, {
  128.967032967033, Automatic}},
TaggingRules->{"TryRealOnly" -> False},
Magnification:>0.9 Inherited,
FrontEndVersion->"12.2 for Linux x86 (64-bit) (December 12, 2020)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"108b4759-1e61-4814-b639-67f2689c7937"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 95, 0, 31, "Text",ExpressionUUID->"3b71748f-259c-494d-869f-10b881eb1ada"],
Cell[CellGroupData[{
Cell[678, 24, 169, 3, 61, "Section",ExpressionUUID->"934a4bf7-953f-49a8-a686-3cd09f9fffa5"],
Cell[850, 29, 169, 3, 31, "Text",ExpressionUUID->"0732f9a9-27cd-461b-aaa6-9bc73673f775"],
Cell[1022, 34, 446, 12, 67, "Input",ExpressionUUID->"cbc4b568-a7ec-4538-8e2a-7bce3254b013",
 InitializationCell->True],
Cell[1471, 48, 122, 0, 31, "Text",ExpressionUUID->"2a193f31-a30a-4d1c-9093-45fc7ca3eb7b"],
Cell[1596, 50, 671, 18, 69, "Input",ExpressionUUID->"6661c6d1-2bef-400d-98e5-258f8d87670e",
 InitializationCell->True],
Cell[2270, 70, 147, 2, 31, "Text",ExpressionUUID->"442977e0-ffae-4666-82cf-77e896b6c883"],
Cell[CellGroupData[{
Cell[2442, 76, 825, 20, 58, "Input",ExpressionUUID->"deb2f459-710e-4233-a1a0-4aa27126dc76",
 InitializationCell->True],
Cell[3270, 98, 1088, 27, 71, "Output",ExpressionUUID->"45fcd910-18aa-4ff4-b158-c405e4dcb5b9"]
}, Open  ]],
Cell[4373, 128, 161, 3, 31, "Text",ExpressionUUID->"81f314f0-aaea-4a39-bb02-3185172ddbf1"],
Cell[CellGroupData[{
Cell[4559, 135, 1049, 28, 129, "Input",ExpressionUUID->"ef18e869-375a-4e28-8055-f71dd065e52b",
 InitializationCell->True],
Cell[5611, 165, 1036, 28, 87, "Output",ExpressionUUID->"3b1d3c3d-8d82-457e-a8a3-7fb9b401473e"]
}, Open  ]],
Cell[6662, 196, 407, 21, 31, "Text",ExpressionUUID->"67fe2e07-5efe-4a68-b4a5-5d83bc8bf044"],
Cell[CellGroupData[{
Cell[7094, 221, 1046, 29, 109, "Input",ExpressionUUID->"d2588755-10c9-4976-930f-c10feb4c63d1",
 InitializationCell->True],
Cell[8143, 252, 1011, 28, 87, "Output",ExpressionUUID->"1573852c-ab76-4263-be98-2f5387107108"]
}, Open  ]],
Cell[9169, 283, 321, 7, 52, "Text",ExpressionUUID->"d332da71-689f-43cf-8779-516aae9576ba"],
Cell[9493, 292, 553, 14, 40, "Input",ExpressionUUID->"f8babd40-bf7c-471c-909f-80fb8f66882e",
 InitializationCell->True],
Cell[10049, 308, 261, 4, 52, "Text",ExpressionUUID->"6ef833b4-3eb8-4d37-a3e1-0f976611de8e"],
Cell[10313, 314, 2167, 56, 217, "Input",ExpressionUUID->"45caa8f8-97ac-465d-b6c9-66e3aee2aac9",
 InitializationCell->True],
Cell[12483, 372, 126, 0, 31, "Text",ExpressionUUID->"3500c6a5-342e-4ea1-b3e7-3d260eda778f"],
Cell[CellGroupData[{
Cell[12634, 376, 667, 15, 97, "Input",ExpressionUUID->"36d0086c-1f51-4e41-b4b7-929a6c02b32a"],
Cell[13304, 393, 787, 15, 29, "Output",ExpressionUUID->"dc41c371-be01-4711-8e61-b051505cdf29"]
}, Open  ]],
Cell[14106, 411, 270, 6, 52, "Text",ExpressionUUID->"1409e04a-cf59-473d-bbf9-f355db77b8d3"],
Cell[CellGroupData[{
Cell[14401, 421, 759, 24, 73, "Input",ExpressionUUID->"f3b6962f-15f4-48e6-b689-cda84a6e46dc"],
Cell[15163, 447, 422, 9, 29, "Output",ExpressionUUID->"3f14742c-40bc-44f8-a7a5-93b5fbab9b6c"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[15634, 462, 161, 3, 61, "Section",ExpressionUUID->"4c23f449-55b0-43d5-881f-4f27f706ae98"],
Cell[15798, 467, 204, 3, 31, "Text",ExpressionUUID->"e1d73b19-45fe-4f46-b88c-282c1fbbdd3d"],
Cell[16005, 472, 2452, 57, 336, "Input",ExpressionUUID->"bbbedb91-4432-413e-834e-fe8864631e67",
 InitializationCell->True],
Cell[18460, 531, 173, 3, 31, "Text",ExpressionUUID->"64fb6d82-6c22-4eeb-a794-65357d4f5363"],
Cell[CellGroupData[{
Cell[18658, 538, 838, 24, 97, "Input",ExpressionUUID->"5661e537-2a44-4522-a936-fea330f75b89"],
Cell[19499, 564, 373, 4, 47, "Output",ExpressionUUID->"317d33af-ccd0-4d58-af5a-d5ae0cfd5efd"]
}, Open  ]],
Cell[19887, 571, 717, 17, 40, "Input",ExpressionUUID->"4f8bfd52-7bc9-4745-bef2-7694eda3b556",
 InitializationCell->True],
Cell[20607, 590, 177, 3, 31, "Text",ExpressionUUID->"2ba9bea2-1376-45ae-8e7d-fb9bbcd92251"],
Cell[CellGroupData[{
Cell[20809, 597, 728, 19, 106, "Input",ExpressionUUID->"faaebb06-139b-4ba9-b1ac-d972c4738086"],
Cell[21540, 618, 3378, 79, 61, "Output",ExpressionUUID->"9dc7dbb3-fa33-4d93-9fbe-a7c366b6f046"]
}, Open  ]],
Cell[24933, 700, 683, 20, 41, "Text",ExpressionUUID->"b9058ff4-6db3-4a31-b063-427918d89fb6"],
Cell[CellGroupData[{
Cell[25641, 724, 283, 6, 41, "Input",ExpressionUUID->"fb1ec65f-49c9-451f-883c-69a292b3b8a6"],
Cell[25927, 732, 174, 2, 29, "Output",ExpressionUUID->"400107ea-884a-4dfe-a193-cfc111850be7"]
}, Open  ]],
Cell[26116, 737, 329, 7, 31, "Text",ExpressionUUID->"56b14ec8-74de-499c-8d6d-13e5e8066b79"],
Cell[26448, 746, 770, 18, 131, "Input",ExpressionUUID->"295a3730-dcdc-45cd-aa64-4b8a22b06dcd"]
}, Open  ]],
Cell[CellGroupData[{
Cell[27255, 769, 168, 3, 61, "Section",ExpressionUUID->"c0df08f4-6cf8-4984-8633-784251351be4"],
Cell[27426, 774, 305, 8, 31, "Text",ExpressionUUID->"fe5c7c47-5939-41d2-a024-366577781a39"],
Cell[27734, 784, 5469, 141, 527, "Input",ExpressionUUID->"b4bbc0a0-4262-4716-9446-f5c9e9398e58",
 InitializationCell->True],
Cell[33206, 927, 172, 3, 31, "Text",ExpressionUUID->"6174f1b4-93a8-4cdb-ab33-4ef8473f2b39"],
Cell[CellGroupData[{
Cell[33403, 934, 1011, 23, 44, "Input",ExpressionUUID->"b1fc2616-1675-4da5-a851-aa19de790714"],
Cell[34417, 959, 10458, 305, 266, "Output",ExpressionUUID->"4a5a1ef4-e5e5-4126-8ad6-549bcd411286"]
}, Open  ]],
Cell[CellGroupData[{
Cell[44912, 1269, 843, 16, 97, "Input",ExpressionUUID->"3b40b186-414d-401f-92ca-1ba9438f45e9"],
Cell[45758, 1287, 1062, 28, 71, "Output",ExpressionUUID->"aa6e152d-faf8-476e-aa42-083390d5f3cf"],
Cell[46823, 1317, 954, 23, 71, "Output",ExpressionUUID->"c7ced30c-7fed-4d7a-8c9a-a2916f3eb486"],
Cell[47780, 1342, 929, 24, 71, "Output",ExpressionUUID->"29dfbd3c-7971-45bb-8a1e-821ef71d871c"],
Cell[48712, 1368, 929, 24, 71, "Output",ExpressionUUID->"5ba7502b-16f6-49d0-80c1-77550e31c99d"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[49690, 1398, 172, 3, 61, "Section",ExpressionUUID->"726876ef-5d78-4045-84fe-3ee4fbc05f03"],
Cell[49865, 1403, 158, 2, 25, "Input",ExpressionUUID->"b29ffad5-3c3f-4835-884b-2b3333cb1cac"],
Cell[50026, 1407, 904, 14, 52, "Text",ExpressionUUID->"d6e7e7cf-f19a-4175-8ad2-59d9a2d932fa"],
Cell[50933, 1423, 2452, 44, 132, "Input",ExpressionUUID->"dad7584f-7a72-4ce2-88d5-044e3ab597f7"],
Cell[53388, 1469, 164, 3, 31, "Text",ExpressionUUID->"0cc09668-445a-4cd3-a903-d68a1fb3ee4d"],
Cell[53555, 1474, 236, 6, 25, "Input",ExpressionUUID->"8adc98fb-fdeb-4898-a9dc-84211d42f65c"],
Cell[53794, 1482, 174, 3, 31, "Text",ExpressionUUID->"d65ce504-c470-46a9-a39d-c9db81197e58"],
Cell[53971, 1487, 706, 19, 68, "Input",ExpressionUUID->"28b8e976-d54f-4a73-9d8b-948c4ff71023"],
Cell[CellGroupData[{
Cell[54702, 1510, 294, 7, 25, "Input",ExpressionUUID->"cbf78f86-6d9a-44fa-9396-c738b0434e24"],
Cell[CellGroupData[{
Cell[55021, 1521, 348, 9, 20, "Print",ExpressionUUID->"a74541b0-5aa0-4a4f-a261-1f429409d2db"],
Cell[55372, 1532, 329, 8, 20, "Print",ExpressionUUID->"d9f2bb90-fc51-4ccd-9429-dcfdfc35714c"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[55750, 1546, 293, 6, 25, "Input",ExpressionUUID->"bb02bc02-8924-46ea-8267-a3c7ce575677"],
Cell[CellGroupData[{
Cell[56068, 1556, 316, 8, 20, "Print",ExpressionUUID->"086ddaef-5b63-429e-99fe-9c5942f90e5c"],
Cell[56387, 1566, 318, 8, 20, "Print",ExpressionUUID->"ac9bd12b-7888-4777-975f-7d49bc0ea494"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[56754, 1580, 268, 6, 25, "Input",ExpressionUUID->"640ac9f1-1e6b-4494-a70f-c2772d083ade"],
Cell[CellGroupData[{
Cell[57047, 1590, 316, 8, 20, "Print",ExpressionUUID->"9a6adfc5-0504-4c7f-be2f-9531df40dc5a"],
Cell[57366, 1600, 315, 8, 20, "Print",ExpressionUUID->"93f395df-6a1a-4185-a632-d11255519589"]
}, Open  ]]
}, Open  ]],
Cell[57708, 1612, 247, 6, 31, "Text",ExpressionUUID->"4f9c0988-0258-43cb-854b-d983cd14cfe7"],
Cell[57958, 1620, 468, 13, 25, "Input",ExpressionUUID->"c443c70f-5a75-4ef4-bbeb-d8d3a31bc05f"],
Cell[CellGroupData[{
Cell[58451, 1637, 799, 18, 97, "Input",ExpressionUUID->"b4145e4b-09a5-41d3-8f1c-680e41e64f46"],
Cell[59253, 1657, 590, 14, 20, "Print",ExpressionUUID->"12b351f1-cf9f-4167-841d-d8d527125e9d"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[59892, 1677, 224, 4, 61, "Section",ExpressionUUID->"9b155fba-f2b2-4c04-8836-04efd989bc8e"],
Cell[60119, 1683, 214, 5, 31, "Text",ExpressionUUID->"3e8f44d5-3ddb-4d4c-bcb4-af6b8a9e7590"],
Cell[CellGroupData[{
Cell[60358, 1692, 676, 16, 28, "Input",ExpressionUUID->"10642b5e-3d07-4fba-a458-07bb8f76c0c0"],
Cell[61037, 1710, 468, 6, 29, "Output",ExpressionUUID->"45197914-ea62-4c23-b558-0e4a64a8311e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[61542, 1721, 810, 26, 67, "Input",ExpressionUUID->"e7d0f50f-5f35-418b-b186-5f394d51bf1a"],
Cell[62355, 1749, 235, 5, 29, "Output",ExpressionUUID->"49d9fb7a-a204-41e0-8dc6-b6de006ad8fc"]
}, Open  ]],
Cell[CellGroupData[{
Cell[62627, 1759, 327, 11, 53, "Input",ExpressionUUID->"c1a55ae8-e9b4-494f-b1b3-78298afb6279"],
Cell[62957, 1772, 284, 8, 29, "Output",ExpressionUUID->"9ad14da1-c8b3-4483-be6a-a349b9bab7e0"]
}, Open  ]],
Cell[CellGroupData[{
Cell[63278, 1785, 534, 15, 25, "Input",ExpressionUUID->"3b8e62ba-673b-49e1-a656-66c933644baa"],
Cell[63815, 1802, 302, 6, 29, "Output",ExpressionUUID->"3ae7e9da-7199-4336-a359-591b8a61eb64"]
}, Open  ]],
Cell[64132, 1811, 716, 21, 42, "Input",ExpressionUUID->"f6db5602-91e4-400e-9607-ab54ab1369b2",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[64873, 1836, 633, 18, 126, "Input",ExpressionUUID->"d4791470-bd92-4ddf-abf5-291269798230",
 InitializationCell->True],
Cell[65509, 1856, 2265, 67, 77, "Output",ExpressionUUID->"d4dc419b-4e42-4bb5-9b98-5f28e1509452"],
Cell[67777, 1925, 2814, 87, 95, "Output",ExpressionUUID->"fd0e375c-8893-4de1-bac9-202919efe525"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[70640, 2018, 214, 4, 61, "Section",ExpressionUUID->"b4361e9f-9914-48b3-8fe9-c36bec722d63"],
Cell[70857, 2024, 324, 5, 31, "Text",ExpressionUUID->"834402b6-fde1-4372-a224-9e0bcb53f1e7"],
Cell[71184, 2031, 224, 4, 31, "Text",ExpressionUUID->"f81ccece-2f91-4f41-883f-21429bbb12fa"],
Cell[CellGroupData[{
Cell[71433, 2039, 943, 27, 163, "Input",ExpressionUUID->"5f1f6541-7187-48b2-951b-d4740ed546b1"],
Cell[72379, 2068, 229, 3, 29, "Output",ExpressionUUID->"8545cce8-b522-416a-a429-dac54bb4f2c2"]
}, Open  ]],
Cell[72623, 2074, 273, 7, 31, "Text",ExpressionUUID->"5deccb45-3429-4f36-8305-6dd9e941a908"],
Cell[CellGroupData[{
Cell[72921, 2085, 1628, 39, 119, "Input",ExpressionUUID->"c5780316-75b6-4e37-8193-27739d822a9f"],
Cell[74552, 2126, 250, 4, 29, "Output",ExpressionUUID->"ad2c5457-d238-4635-abe7-c76eb0e7a79c"]
}, Open  ]],
Cell[74817, 2133, 368, 9, 31, "Text",ExpressionUUID->"005014c7-caf8-48cc-8cdf-a529b28b51dc"],
Cell[75188, 2144, 264, 6, 31, "Text",ExpressionUUID->"8ed8322f-c30a-4867-8263-043c6b9bc413"]
}, Open  ]],
Cell[CellGroupData[{
Cell[75489, 2155, 216, 4, 61, "Section",ExpressionUUID->"517bd2c3-5c06-413a-8adc-e54e505e1746"],
Cell[75708, 2161, 393, 12, 35, "Text",ExpressionUUID->"034abead-9b52-45e9-97bb-0e3a21b02b3d"],
Cell[76104, 2175, 655, 20, 31, "Text",ExpressionUUID->"43751fde-0a48-40a8-a0f1-14b3e8be61ef"],
Cell[76762, 2197, 1477, 42, 72, "Text",ExpressionUUID->"78cf042a-a4b0-45d3-b597-0f772ac36a0a"],
Cell[78242, 2241, 879, 23, 52, "Text",ExpressionUUID->"2f6a3ffc-f244-4c0f-a551-9368fa304ceb"],
Cell[79124, 2266, 1298, 37, 93, "Text",ExpressionUUID->"bf64b6fd-cf81-4ef8-a818-7b26bfeac2f6"],
Cell[80425, 2305, 243, 6, 31, "Text",ExpressionUUID->"3c891eca-bfb4-4a7f-ac86-4ff495922d4a"],
Cell[80671, 2313, 944, 33, 31, "Text",ExpressionUUID->"f0f6bb27-990a-4633-a3d7-c4e5e427202a"],
Cell[81618, 2348, 750, 25, 31, "Text",ExpressionUUID->"2e35efd2-680d-4f76-8874-21cbee906a9e"],
Cell[82371, 2375, 557, 21, 72, "Text",ExpressionUUID->"0968dcce-a4ff-43fc-8456-7e0a648d630b"]
}, Open  ]]
}
]
*)

